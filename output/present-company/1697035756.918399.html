<html>
<head><meta charset="UTF-8"></head><h2>Archives, <a href="https://futureofcoding.org/community">Future of Coding Community</a>, #present-company</h2>
  <table>
  <tr>
    <td style="width:72px; vertical-align:top; padding-bottom:1em">
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-11 07:49</span><br/>
A question that came up in a discussion this morning:<br/><br/>Suppose you want to publish a command-line utility program, meant to be easy to use. Doing Web retrieval and some post-processing. Around 500 lines in a typical scripting language, but with dependencies (in that language plus C libraries).<br/><br/>It looks like packaging such a tool for all popular platforms (i.e. package managers) will be a lot more work than actually writing the code.<br/><br/>True? Any way to avoid this?<br/><br/>Ideas so far: don't use a scripting language, but something with a compiler that can produce portable executables for every major platform. Recommendations in that category so far: Go, Rust, Racket, Common Lisp. I have doubts that all of these can handle "plus C libraries", but it's a start.<br/><br/>Does anyone here have actual experience with this kind of project?
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697036543.534549"></a>
      <img src="https://avatars.slack-edge.com/2021-09-13/2508698086192_565c54a4fa91a0c8c75a_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697036543.534549" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Tom Lieber</b>
<span style="margin:2em; color:#606060">2023-10-11 08:02</span><br/>
Do you just want a package, or do you wanted it listed in all the registries for installation by name?
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697039165.774019"></a>
      <img src="https://secure.gravatar.com/avatar/9bca25e5dfc91356e5e3356277fa2868.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0020-72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697039165.774019" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Benji York</b>
<span style="margin:2em; color:#606060">2023-10-11 08:46</span><br/>
It's relatively new, but if you're open to experimenting, take a look at <a href="https://pkgx.sh/">https://pkgx.sh/</a>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697042933.969869"></a>
      <img src="https://secure.gravatar.com/avatar/6fceba60ff0c90dc32cbff29054b02c2.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0011-72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697042933.969869" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Justin Blank</b>
<span style="margin:2em; color:#606060">2023-10-11 09:48</span><br/>
I can’t actually evaluate whether it’s a good idea, but <a href="https://justine.lol/ape.html">https://justine.lol/ape.html</a> exists
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697043516.929519"></a>
      <img src="https://avatars.slack-edge.com/2019-02-14/551655871797_2624b1e78c0a9eaed529_72.jpg" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697043516.929519" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Chris Knott</b>
<span style="margin:2em; color:#606060">2023-10-11 09:58</span><br/>
I think runnable fat .jar is probably the best bet, like the Apache Tika standalone app. It has about a million dependencies under the hood but the user experience is just to download a single executable that runs on all platforms (that have java)
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697044659.305389"></a>
      <img src="https://secure.gravatar.com/avatar/f48924f215efa665f3c87affcdb14278.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0002-72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697044659.305389" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Tudor Girba</b>
<span style="margin:2em; color:#606060">2023-10-11 10:17</span><br/>
<span style="background-color:#ccf">@Konrad Hinsen</span> did you consider Pharo+C?
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697093080.041989"></a>
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697093080.041989" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-11 23:44</span><br/>
<span style="background-color:#ccf">@Tudor Girba</span> Briefly. I have never seen a command-line tool written in Pharo in the wild, so I can only speculate how that would be distributed. For plain Pharo code, I imagine a tarball containing the VM and the image, plus a script that takes care of running the VM with the right parameters to find the image. The obstacle I see is the C dependencies. For macOS and Windows, I could add the binaries to the tarball. For Linux, there is too much heterogeneity to distribute binaries, so I'd have to find a way to make the Pharo code find the libraries wherever the system package manager has put them. And that's something that only the package manager knows for sure.<br/><br/>Scientific computing environments are particularly challenging because "Linux" really means "anything with a Linux kernel". There's high-performance computing centres running prehistoric CentOS versions ("we prefer known bugs to unknown bugs"), nerd laptops with the latest exotic distribution, and in between more standard installations such as Debian or Ubuntu, in any versions from ten years ago to bleeding edge.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697112347.074239"></a>
      <img src="https://avatars.slack-edge.com/2023-10-13/6057269405632_8ea58fc41bd6baa7dda6_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697112347.074239" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Jack Rusher</b>
<span style="margin:2em; color:#606060">2023-10-12 05:05</span><br/>
<a href="https://x.com/borkdude/status/1712073551992307852?s=20">https://x.com/borkdude/status/1712073551992307852?s=20</a>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697112370.150479"></a>
      <img src="https://avatars.slack-edge.com/2023-10-13/6057269405632_8ea58fc41bd6baa7dda6_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697112370.150479" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Jack Rusher</b>
<span style="margin:2em; color:#606060">2023-10-12 05:06</span><br/>
There are a thousand things to optimize over in this question, but this is one way.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697117568.120399"></a>
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697117568.120399" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-12 06:32</span><br/>
That looks nice, thanks!<br/>It doesn't mention C dependencies though...
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697120811.058769"></a>
      <img src="https://avatars.slack-edge.com/2023-10-13/6057269405632_8ea58fc41bd6baa7dda6_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697120811.058769" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Jack Rusher</b>
<span style="margin:2em; color:#606060">2023-10-12 07:26</span><br/>
There’s FFI, but you still have the problem of whether the libs you want to use are installed. The maximally safe case is to static link everything into a platform specific binary using, zB <tt>go</tt>.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697127502.229609"></a>
      <img src="https://avatars.slack-edge.com/2023-09-23/5937523466869_1beaa0968ce502c4375e_72.jpg" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697127502.229609" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Arcade Wise</b>
<span style="margin:2em; color:#606060">2023-10-12 09:18</span><br/>
Cosmopolitan C is surprisingly powerful! 
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697129273.814289"></a>
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697129273.814289" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-12 09:47</span><br/>
<span style="background-color:#ccf">@Jack Rusher</span> It's either that, or integration of my code into whatever build system the target platform uses. Both options require a lot of overhead effort.<br/><span style="background-color:#ccf">@Arcade Wise</span> Found it (<a href="https://justine.lol/cosmopolitan/">https://justine.lol/cosmopolitan/</a>) - that's amazing! Not sure I'd be willing to write my code in C in order to use it, but it's pretty cool :-)
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697129315.224759"></a>
      <img src="https://avatars.slack-edge.com/2023-09-23/5937523466869_1beaa0968ce502c4375e_72.jpg" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697129315.224759" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Arcade Wise</b>
<span style="margin:2em; color:#606060">2023-10-12 09:48</span><br/>
Yeah! It’s wild. I wonder how hard it would be to make a language that compiles to and has bindings for cosmo C
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697129497.095539"></a>
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697129497.095539" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-12 09:51</span><br/>
Not so much a language but a toolchain, right? Any language that can be compiled to C should be adaptable rather easily. That includes C++, Fortran, Scheme, Common Lisp, and probably many others.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697237447.297159"></a>
      <img src="https://avatars.slack-edge.com/2023-10-17/6066889038289_0d9c7dcaa476f559eb42_72.jpg" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697237447.297159" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Mike Austin</b>
<span style="margin:2em; color:#606060">2023-10-13 15:50</span><br/>
Node with WebAseembly? <a href="https://nodejs.dev/en/learn/nodejs-with-webassembly/">https://nodejs.dev/en/learn/nodejs-with-webassembly/</a> I don't have direct experience with WASM in Node, but many platforms can run Node.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697285804.696879"></a>
      <img src="https://avatars.slack-edge.com/2021-03-12/1859691333940_e169f54bbaf8b9b36b12_72.png" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697285804.696879" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Konrad Hinsen</b>
<span style="margin:2em; color:#606060">2023-10-14 05:16</span><br/>
But is it possible to create stand-alone binaries? If users have to install node, installation is too complicated.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1697304089.878159"></a>
      <img src="https://avatars.slack-edge.com/2023-10-17/6066889038289_0d9c7dcaa476f559eb42_72.jpg" style="float:left"/>
      <a href="../present-company/1697035756.918399.html#1697304089.878159" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Mike Austin</b>
<span style="margin:2em; color:#606060">2023-10-14 10:21</span><br/>
Looks like there's experimental work, but yeah I wouldn't depend on that yet. <a href="https://nodejs.org/api/single-executable-applications.html">https://nodejs.org/api/single-executable-applications.html</a>. There is however, pkg: <a href="https://medium.com/@tech_girl/deploy-your-node-js-application-as-a-single-executable-4103a2508dd7">https://medium.com/@tech_girl/deploy-your-node-js-applicatio&hellip;</a> I may experiment with this myself, it looks interesting. The binary will be fairly large of course, since it's the whole JavaScript VM + your app :slightly_smiling_face:
    </td>
  </tr>
  </table>
<hr>
<a href="https://akkartik.name/foc-archive.zip">download this site</a> (~25MB)<br/>
<a href="https://github.com/akkartik/foc-archive">Git repo</a>
</html>
