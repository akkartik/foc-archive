<html>
<head><meta charset="UTF-8"></head><h2>Archives, <a href="https://futureofcoding.org/community">Future of Coding Community</a>, #thinking-together</h2>
  <table>
  <tr>
    <td style="width:72px; vertical-align:top; padding-bottom:1em">
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 10:45</span><br/>
There’s a recurring theme in my career, going back to my very first job, that goes under the mental headline of “wide logic” problems… That’s where you have a somewhat narrow stream (conceptually, not necessarily streaming per se) of data, and you need to evaluate a large number of functions against each item--at least a handful, often dozens, sometimes hundreds! The functions are basically always provided by the user, although normally in a declarative, non-Turing-complete DSL. I’m curious whether others have noticed this pattern, and whether you know of any more mainstream labels for it?<br/><br/>The closest I’ve found is papers that reference publish/subscribe and indexing techniques for complex boolean expression trees, e.g.:<br/>• <a href="https://dl.acm.org/doi/10.14778/2732296.2732298">An efficient publish/subscribe index for e-commerce databases</a> (VLDB ’14)<br/>• <a href="https://dl.acm.org/doi/10.1145/2487259.2487260">Analysis and optimization for boolean expression indexing [BE-Tree]</a> (ACM Trans. DB. Sys. ’13)<br/>• <a href="https://dl.acm.org/doi/10.1145/3448016.3457266">A-Tree: A Dynamic Data Structure for Efficiently Indexing Ar&hellip;</a> (SIGMOD/PODS ’21 … actually this is a new one for me, I need to read it now… :slightly_smiling_face:)
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655747304.186279"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655747304.186279" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 10:48</span><br/>
Some stories…
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655748114.837129"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655748114.837129" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:01</span><br/>
First job: a (snail mail) direct marketing agency. We would run dozens of queries/reports to analyze the performance of mailings/campaigns, breaking down response rates, average donation amounts, etc.<br/><br/>The functions were often “symbolic” (i.e. calculated) fields in the 4GL, they were in a Turing-complete language but often written by relatively unskilled programmers. I built a system that would traverse the analysis/mailing list once, eval all the expressions once per record, and aggregate them in memory over multiple group-bys
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749029.213759"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749029.213759" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:17</span><br/>
Second, third and fourth jobs didn’t really have this feature…
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749242.929969"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749242.929969" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:20</span><br/>
Fifth job was <a href="http://layer7.com">layer7.com</a> (an API gateway appliance), every message needed to be resolved to one of potentially hundreds of policies, but the resolution logic was pretty simple, and once resolved, the policy didn’t tend to be too branchy
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749385.184329"></a>
      <img src="https://avatars.slack-edge.com/2018-11-25/487455880658_9e85c7bdd45b1d2d4721_72.jpg" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749385.184329" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Chris Granger</b>
<span style="margin:2em; color:#606060">2022-06-20 11:23</span><br/>
Sounds like streaming analytics to me.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749416.780449"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749416.780449" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:23</span><br/>
Sixth job was a SaaS app for monitoring compliance rules at brokerages… There were hundreds of handcrafted rules that needed to be evaluated against every Order, Trade and Account record after a nightly ETL job. Before I got involved, every rule was run one at a time, sequentially, and some customers’ nightly jobs were starting to run up against the clock.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749452.434219"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749452.434219" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:24</span><br/>
Definitely streaming analytics, but from what I’ve seen so far the support for this pattern isn’t great anywhere
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749490.555159"></a>
      <img src="https://avatars.slack-edge.com/2018-11-25/487455880658_9e85c7bdd45b1d2d4721_72.jpg" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749490.555159" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Chris Granger</b>
<span style="margin:2em; color:#606060">2022-06-20 11:24</span><br/>
Differential dataflow should handle it well I would think. 
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749579.487879"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749579.487879" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:26</span><br/>
I’ve definitely been keeping a close eye on <a href="http://materialize.io">materialize.io</a> :slightly_smiling_face: … IIUC they don’t do a great job with datasets that are significantly larger than main memory
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655749801.216289"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655749801.216289" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:30</span><br/>
At the brokerage monitoring thing, the hack I came up with was to stipulate that every rule needed to start with (in an AND position) a predicate that was constrained to be mechanically translatable to SQL, and all other predicates were MVEL, less constrained. All the rules that shared that primary predicate would be run as a single query as the first filter, and the MVEL expressions for the sub-rules would be run in-memory instead of pushed down
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655750122.998189"></a>
      <img src="https://avatars.slack-edge.com/2018-11-25/487455880658_9e85c7bdd45b1d2d4721_72.jpg" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655750122.998189" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Chris Granger</b>
<span style="margin:2em; color:#606060">2022-06-20 11:35</span><br/>
ah yeah, if you need something out of core, I don't think DD (which is lower level than the materialize offering) will give you that, though it may be something you could add. <a href="http://Relational.ai">Relational.ai</a> is probably almost exactly what you want (very powerful variant of datalog that can handle very large datasets and does incremental evaluation), but they're a bit early yet.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655750232.745209"></a>
      <img src="https://avatars.slack-edge.com/2022-04-29/3447576657367_f58a6508f11105e0d0be_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655750232.745209" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Alex Cruise</b>
<span style="margin:2em; color:#606060">2022-06-20 11:37</span><br/>
Lately I’ve been more focused on teasing out the 3-4 very different cost models for the sub-expressions that queries are composed of:<br/>• pure functions that don’t even look at data or the environment; that can be evaluated whenever<br/>• functions that need to look at the record, or cheap environment stuff like the current time of day<br/>• stateful functions, usually aggregates but sometimes more complex<br/>• things that need to do IO: lookups, external service calls, etc. Caching becomes mission-critical
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655761893.884199"></a>
      <img src="https://avatars.slack-edge.com/2021-09-13/2483463922595_27dffd0e73bd6f709927_72.gif" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655761893.884199" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Tom Larkworthy</b>
<span style="margin:2em; color:#606060">2022-06-20 14:51</span><br/>
yeah I have seen this a lot too, e.g. achievements on fitness trackers (tell me when I have done 10,000 steps over 10K customer base).<br/><br/>The specification is declarative but the data arrives incrementally. Due to the huge maintenance issues of trying to upgrade state on an incremental streaming solution, I tend to recommend just recomputing from scratch every X mins and throw horizontal compute at it (e.g. BigQuery). The system remains stateless then, plus you always need the from scratch computation anyway to recover from disaster, so it's the first thing to do anyway.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655762323.503099"></a>
      <img src="https://avatars.slack-edge.com/2021-09-13/2483463922595_27dffd0e73bd6f709927_72.gif" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655762323.503099" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Tom Larkworthy</b>
<span style="margin:2em; color:#606060">2022-06-20 14:58</span><br/>
I see this as  a recurring theme of incremental computation, where I see analogues with differential equations.<br/><pre style="white-space:pre-wrap">declarative is to imperatives as y = f(x) is to dy/dx = f(x, y) </pre>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1655811575.243389"></a>
      <img src="https://avatars.slack-edge.com/2023-10-13/6057269405632_8ea58fc41bd6baa7dda6_72.png" style="float:left"/>
      <a href="../thinking-together/1655747158.959289.html#1655811575.243389" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Jack Rusher</b>
<span style="margin:2em; color:#606060">2022-06-21 04:39</span><br/>
These are all <a href="https://en.wikipedia.org/wiki/Complex_event_processing">Complex Event Processing</a> (CEP) use cases. We built a system at a startup called Aleri in the mid-00s that handled this sort of thing with continuous queries implemented over a dataflow engine. We sold the company to Sybase, which sold to SAP, which -- so far as I know -- still sells the product today.
    </td>
  </tr>
  </table>
<hr>
<a href="https://akkartik.name/foc-archive.zip">download this site</a> (~25MB)<br/>
<a href="https://github.com/akkartik/foc-archive">Git repo</a>
</html>
