<html>
<head><meta charset="UTF-8"></head><h2>Archives, <a href="https://futureofcoding.org/community">Future of Coding Community</a>, #thinking-together</h2>
  <table>
  <tr>
    <td style="width:72px; vertical-align:top; padding-bottom:1em">
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-24 23:34</span><br/>
What should the right notation be for the rotate (circular shift) operation?<br/><br/>This seems like an important question since the operation is common in cryptography, and since the ARM instruction set goes to great lengths to allow any instruction to perform it. But apparently there's never been a good notation for it:<br/><br/><a href="https://stackoverflow.com/questions/32785998/symbol-for-bitwise-circular-shifts">https://stackoverflow.com/questions/32785998/symbol-for-bitwise-circular-shifts</a><br/><br/>Desirable properties:<br/><li> Stop thinking in terms of shift. Every rotation left can also be viewed as a rotation right. It feels most natural to think of rotate(X, n) to mean "X rotated to start at bit n."<br/><li> No distracting ambiguous usage anywhere. Luckily we've already discarded '&lt;&lt;&lt;' above. <tt>&lt;&gt;</tt> has distracting connotations of inequality. Maybe <tt>&gt;&lt;</tt>?<br/><li> Ideally just ascii characters. Though I suppose we could use one of the circular unicode arrows at a pinch.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294199.130000"></a>
      <img src="https://secure.gravatar.com/avatar/aee3c99144dfc6644c6c1f1303683140.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294199.130000" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Andrew F</b>
<span style="margin:2em; color:#606060">2020-11-25 00:49</span><br/>
Maybe <tt>&gt;@&gt;</tt> and <tt>&lt;@&lt;</tt>, playing on how @ looks vaguely circular. Actually those would be a huge pain to type, putting the @ on one end or another would be less aggressively unergonomic.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294268.130300"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294268.130300" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 00:51</span><br/>
Yeah. I've been thinking of <tt>&gt;|&lt;</tt> which is also quite terrible on the fingers.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294626.130500"></a>
      <img src="https://secure.gravatar.com/avatar/aee3c99144dfc6644c6c1f1303683140.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0009-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294626.130500" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Andrew F</b>
<span style="margin:2em; color:#606060">2020-11-25 00:57</span><br/>
Also looks even more like a face, or a dragonfly. That could be a benefit or drawback depending on your perspective. ;)
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294729.130700"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294729.130700" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 00:58</span><br/>
The horizontal symmetry is indeed an irksome distraction.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294785.130900"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294785.130900" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 00:59</span><br/>
Maybe <tt>&gt;^&lt;</tt>? Still a dragonfly or butterfly.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606294880.131100"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606294880.131100" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 01:01</span><br/>
<tt>&gt;-&lt;</tt> is one shift less. That seems worth the horizontal symmetry.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606300326.131300"></a>
      <img src="https://secure.gravatar.com/avatar/58ad4af42f7cff8698951a7befb26f0f.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606300326.131300" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Oleksii Shmalko</b>
<span style="margin:2em; color:#606060">2020-11-25 02:32</span><br/>
<tt>rotate_right</tt>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606300691.131500"></a>
      <img src="https://secure.gravatar.com/avatar/58ad4af42f7cff8698951a7befb26f0f.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606300691.131500" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Oleksii Shmalko</b>
<span style="margin:2em; color:#606060">2020-11-25 02:38</span><br/>
I understand why you propose a symmetrical operator (because you can rotate left via rotate right). But I still find the symmetrical operators confusing—that's still rotate right, but the operator does not show this
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606301051.131700"></a>
      <img src="https://avatars.slack-edge.com/2020-11-02/1478272687812_88975cfbf19475e5c6f0_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606301051.131700" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Eldritch Conundrum</b>
<span style="margin:2em; color:#606060">2020-11-25 02:44</span><br/>
How about &gt;&gt;&lt; and &gt;&lt;&lt;, they describe in what direction each bit goes if you imagine a 3-bit integer.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606301345.131900"></a>
      <img src="https://secure.gravatar.com/avatar/58ad4af42f7cff8698951a7befb26f0f.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0010-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606301345.131900" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Oleksii Shmalko</b>
<span style="margin:2em; color:#606060">2020-11-25 02:49</span><br/>
My recommendation is to go with full name and is what Rust uses. Rust has many intrinsics—functions that have special meaning for the compiler. Many operations that have special support in some processors are exposed as intrinsics. I very much like this approach as it allows you to use processor support when you need it, and you don't have to remember special syntax<br/><br/><a href="https://doc.rust-lang.org/std/intrinsics/index.html">https://doc.rust-lang.org/std/intrinsics/index.html</a>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606327592.132300"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606327592.132300" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 10:06</span><br/>
<span style="background-color:#ccf">@Alexey</span> I was careful to ask for a <em>notation</em>. It's not really possible to make a general recommendation like this that works in all contexts. Imagine designing <a href="https://en.wikipedia.org/wiki/Salsa20">https://en.wikipedia.org/wiki/Salsa20</a> with pen and paper. I think having to write out <tt>rotate_left</tt> each time would hinder thought (<a href="https://dl.acm.org/doi/pdf/10.1145/358896.358899">https://dl.acm.org/doi/pdf/10.1145/358896.358899</a>)<br/><br/>In this case the problem I'm working on is coming up with a reasonable representation of the ARM ISA. ARM binary operators all support one immediate operand that must fit in 12 bits. However the 12 bits are used in a strange way, starting with 8 bits and then using the remaining 4 to determine how to rotate it. The recommended "universal assembly language" for ARM is to just provide constants and let the toolchain give you errors like:<br/><br/><pre style="white-space:pre-wrap">A1510E:Immediate 0x&lt;imm&gt; cannot be represented by 0-255 and a rotation</pre><br/>(<a href="https://developer.arm.com/documentation/100074/0612/assembler-errors-and-warnings/list-of-the-armasm-error-and-warning-messages">https://developer.arm.com/documentation/100074/0612/assemble&hellip;</a>)<br/><br/>This seems pretty lousy. I'd prefer something that's more "correct by construction", that's not one of these:<br/><br/><pre style="white-space:pre-wrap">ADD Rd, Rn, 0xff, 4<br/>ADD Rd, Rn, rotate_left(0xff, 4)</pre><br/>(I'm focusing on immediates just to simplify exposition. Making the second operand register-based opens up a larger can of worms.)<br/><br/>Tl;dr - There is nothing "reduced" about this RISC intruction set.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606348796.132800"></a>
      <img src="https://secure.gravatar.com/avatar/34185a5422416f82b3e4a62964f2866b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0008-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606348796.132800" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Doug Moen</b>
<span style="margin:2em; color:#606060">2020-11-25 15:59</span><br/>
You want a concise notation for a function that is naturally called <tt>rotate(X,n)</tt>. Suggestions:<br/>• n<tt>⌽</tt>X -- the APL rotate operator. APL was originally a mathematical notation, and was only later turned into a programming language.<br/>• n <tt>&lt;|&gt;</tt> X -- an ASCII approximation of the above.<br/>• n <tt>rot</tt> X -- yes, this is a notation, just as <tt>sin x</tt> is mathematical notation for the sine function.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606354193.133000"></a>
      <img src="https://avatars.slack-edge.com/2020-05-30/1167794177073_5446491963e3446625b7_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606354193.133000" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Robert Butler</b>
<span style="margin:2em; color:#606060">2020-11-25 17:29</span><br/>
How about <tt>n -o X</tt> or <tt>n o- X</tt>. Think of that as a wheel with a tail. Or possibly <tt>n o! X</tt> or <tt>n !o X</tt>.
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606361032.137400"></a>
      <a href="../thinking-together/1606289697.124500.html#1606361032.137400" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Emmanuel Oga</b>
<span style="margin:2em; color:#606060">2020-11-25 19:23</span><br/>
those salsa diagrams look adorable :slightly_smiling_face:
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606361125.137800"></a>
      <img src="https://secure.gravatar.com/avatar/aa31b79adedc3f60547769f1a8971ba6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0015-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606361125.137800" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Emmanuel Oga</b>
<span style="margin:2em; color:#606060">2020-11-25 19:25</span><br/>
perhaps a more general solution would try to express subscript of any operator, say with some sort of underscore. Then you could subscript any operator. <tt>&lt;&lt;&lt;_3</tt> is the obvious thought
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606361233.138000"></a>
      <img src="https://secure.gravatar.com/avatar/aa31b79adedc3f60547769f1a8971ba6.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2Fdf10d%2Fimg%2Favatars%2Fava_0015-72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606361233.138000" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Emmanuel Oga</b>
<span style="margin:2em; color:#606060">2020-11-25 19:27</span><br/>
I know you ruled <tt>&lt;&lt;&lt;</tt> out before but since it seems like it used in all those famous papers, perhaps worth keeping. It is also easy to write and subscript with a pencil
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top; padding-bottom:1em">
      <a name="1606364482.138400"></a>
      <img src="https://avatars.slack-edge.com/2019-07-14/687915485201_6e649a383cf8f9e366e3_72.png" style="float:left"/>
      <a href="../thinking-together/1606289697.124500.html#1606364482.138400" style="color:#aaa">#</a>
    </td>
    <td style="vertical-align:top; padding-bottom:1em; padding-left:1em">
<b>Kartik Agaram</b>
<span style="margin:2em; color:#606060">2020-11-25 20:21</span><br/>
Indeed. When I wrote OP I'd heard of the use of <tt>&lt;&lt;&lt;</tt> for this purpose, but also that it used to have a <tt>rot</tt> on top of it. Which suffers from the obvious drawbacks.<br/><br/>To describe why <tt>&lt;&lt;&lt;</tt> still doesn't work, I need to expand the context from immediates to also include registers. The ARM instruction set can be summarized lossily in the following gestalt lines:<br/><br/><pre style="white-space:pre-wrap">Rd &lt;- Rn op Rm<br/>Rd &lt;- Rn op (imm8 &lt;|&gt; k)  # rotate until LSB is at bit k from the right; k must be even and in [0, 32)<br/>Rd &lt;- Rn op (Rm &lt;&lt; imm5)<br/>Rd &lt;- Rn op (Rm &gt;&gt; imm5)  # ASR/signed<br/>Rd &lt;- Rn op (Rm &gt;&gt;&gt; imm5)  # LSR/unsigned<br/>Rd &lt;- Rn op (Rm &lt;|&gt; k)  # rotate<br/>Rd &lt;- Rn op (Rm c&gt;&gt; 1)  # shift right and insert carry flag</pre><br/>(So far my favorite option is <span style="background-color:#ccf">@Doug Moen</span>'s <tt>&lt;|&gt;</tt>. I've come to terms with its conflicting association with alternation in Haskell.)
    </td>
  </tr>
  </table>
<hr>
<a href="https://akkartik.name/foc-archive.zip">download this site</a> (~25MB)<br/>
<a href="https://github.com/akkartik/foc-archive">Git repo</a>
</html>
